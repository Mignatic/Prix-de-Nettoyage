<!DOCTYPE html><html lang="fr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Calculateur de Nettoyage</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',Arial,sans-serif;background-color:#e9ecef;padding:20px;line-height:1.6;color:#333}.container{max-width:1000px;margin:40px auto;background:#fff;padding:40px;border-radius:16px;box-shadow:0 8px 30px rgba(0,0,0,.1);transition:transform .3s ease}.container:hover{transform:translateY(-5px)}h1{text-align:center;color:#1a3c34;margin-bottom:30px;font-size:2.2rem;font-weight:600}label{font-weight:600;display:block;margin:15px 0 8px;color:#2c3e50;font-size:1.1rem}input,select,textarea{width:100%;padding:12px;font-size:1rem;border-radius:8px;border:1px solid #d1d9e6;background-color:#f8fafc;transition:border-color .3s ease,box-shadow .3s ease}input:focus,select:focus,textarea:focus{outline:0;border-color:#3498db;box-shadow:0 0 8px rgba(52,152,219,.3)}textarea{resize:vertical;min-height:120px;font-family:inherit}.btn{width:100%;background-color:#3498db;color:#fff;padding:14px;border:none;border-radius:8px;font-size:1.1rem;font-weight:500;cursor:pointer;margin-top:20px;transition:background-color .3s ease,transform .2s ease;display:flex;align-items:center;justify-content:center;gap:8px}.btn:hover{background-color:#2980b9;transform:translateY(-2px)}.btn:active{transform:translateY(0)}.result{font-size:1.8rem;font-weight:600;text-align:center;margin-top:30px;color:#27ae60;background:#e8f5e9;padding:15px;border-radius:8px}.result ul{list-style:none;text-align:left;margin:10px 0}.result ul li{margin:5px 0}.space-block{border:1px dashed #b0bec5;padding:20px;margin-top:20px;border-radius:12px;background-color:#f9fbfc;position:relative;transition:background-color .3s ease}.space-block:hover{background-color:#f1f4f8}.space-block .delete-btn{position:absolute;top:10px;right:10px;background:#e74c3c;color:#fff;border:none;border-radius:50%;width:30px;height:30px;cursor:pointer;font-size:1rem;display:flex;align-items:center;justify-content:center;transition:background-color .3s ease}.space-block .delete-btn:hover{background:#c0392b}.form-group{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:20px}.checkbox-group{display:flex;flex-wrap:wrap;gap:10px}.checkbox-group label{display:flex;align-items:center;gap:5px;font-weight:400}.error{border-color:red!important}.error-message{color:red;font-size:.9rem;margin-top:5px}@media (max-width:768px){.container{padding:20px;margin:20px}h1{font-size:1.8rem}.btn{font-size:1rem;padding:12px}.result{font-size:1.5rem}}@media (max-width:480px){.form-group{grid-template-columns:1fr}.space-block{padding:15px}}</style></head><body><div class="container"><h1>🧹 Estimation du Prix de Nettoyage</h1><div class="form-group"><div><label for="name">Nom complet :</label><input type="text" id="name" placeholder="Nom et prénom" required></div><div><label for="email">Email :</label><input type="email" id="email" placeholder="Votre email" required></div></div><div class="form-group"><div><label for="phone">Téléphone :</label><input type="tel" id="phone" placeholder="Numéro de téléphone" required></div><div><label for="address">Adresse complète :</label><input type="text" id="address" placeholder="Adresse, Ville, Code Postal" required></div></div><label for="dirt">Niveau de saleté :</label><select id="dirt"><option value="normal">Normal</option><option value="deep">En profondeur</option><option value="greasy">Très sale</option></select><div class="form-group"><div><label for="products">Produits de nettoyage :</label><select id="products"><option value="client">Par le client</option><option value="entreprise">Par l'entreprise</option><option value="moi">Par moi-même</option></select></div><div><label for="tools">Outils de nettoyage :</label><select id="tools"><option value="client">Par le client</option><option value="entreprise">Par l'entreprise</option><option value="moi">Par moi-même</option></select></div></div><div id="spaces-list"></div><button type="button" class="btn" onclick="addSpaceField()"><span>➕</span>Ajouter un espace</button><div class="form-group"><div><label for="contract-type">Type de contrat :</label><select id="contract-type"><option value="ponctuel">Ponctuel</option><option value="hebdomadaire">Hebdomadaire</option><option value="mensuel">Mensuel</option><option value="quotidien">Quotidien</option><option value="autre">Autre</option></select></div><div><label>Jours préférés :</label><div class="checkbox-group"><label><input type="checkbox" name="preferred-day" value="Lundi"> Lundi</label><label><input type="checkbox" name="preferred-day" value="Mardi"> Mardi</label><label><input type="checkbox" name="preferred-day" value="Mercredi"> Mercredi</label><label><input type="checkbox" name="preferred-day" value="Jeudi"> Jeudi</label><label><input type="checkbox" name="preferred-day" value="Vendredi"> Vendredi</label><label><input type="checkbox" name="preferred-day" value="Samedi"> Samedi</label><label><input type="checkbox" name="preferred-day" value="Dimanche"> Dimanche</label></div><div class="error-message" id="days-error"></div></div><div><label>Heures préférées :</label><div class="checkbox-group"><label><input type="checkbox" name="preferred-time" value="08:00"> 08:00</label><label><input type="checkbox" name="preferred-time" value="10:00"> 10:00</label><label><input type="checkbox" name="preferred-time" value="12:00"> 12:00</label><label><input type="checkbox" name="preferred-time" value="14:00"> 14:00</label><label><input type="checkbox" name="preferred-time" value="16:00"> 16:00</label><label><input type="checkbox" name="preferred-time" value="18:00"> 18:00</label></div><div class="error-message" id="times-error"></div></div></div><label for="notes">Remarques ou précisions :</label><textarea id="notes" maxlength="3500" placeholder="Besoins spécifiques, contraintes, etc."></textarea><button class="btn" onclick="calculatePrice()"><span>💰</span>Calculer le prix</button><button class="btn" onclick="sendEmail()"><span>📩</span>Envoyer par Email</button><div class="result" id="result"><h3>Récapitulatif du coût :</h3><ul id="cost-breakdown"></ul><p><strong>Total estimé :<span id="total-cost"></span>€</strong></p></div></div><script>const spaceTypes = [
      "Chambre", "Salon", "Salle de bain", "Cuisine", "Balcon",
      "Bureau", "Salle de réunion", "WC", "Réception",
      "Hall", "Garage", "Terrasse", "Escalier", "Couloir",
      "Salle d’attente", "Vestiaire", "Salle informatique", "Autre"
    ];

    function addSpaceField() {
      const div = document.createElement("div");
      div.className = "space-block";
      div.innerHTML = `
        <button class="delete-btn" onclick="this.parentElement.remove()">✕</button>
        <label>Type de l'espace :</label>
        <select class="space-type">
          ${spaceTypes.map(type => `<option value="${type}">${type}</option>`).join('')}
        </select>
        <label>Surface d'un espace (m²) :</label>
        <input type="number" class="space-area" placeholder="Ex: 25" min="0" />
        <label>Nombre d'espaces :</label>
        <input type="number" class="space-count" placeholder="Ex: 2" min="1" value="1" />
        <div class="error-message" id="space-error-${Date.now()}"></div>
      `;
      document.getElementById("spaces-list").appendChild(div);
    }

    function calculatePrice() {
      const dirt = document.getElementById("dirt").value;
      const products = document.getElementById("products").value;
      const tools = document.getElementById("tools").value;
      const rate = { normal: 2.5, deep: 3.5, greasy: 4.5 }[dirt];
      let total = 0;
      let breakdown = "";
      let valid = true;

      document.querySelectorAll(".space-block").forEach(block => {
        const type = block.querySelector(".space-type").value;
        const area = parseFloat(block.querySelector(".space-area").value);
        const count = parseInt(block.querySelector(".space-count").value);
        const errorDiv = block.querySelector(".error-message");
        if (isNaN(area) || isNaN(count)) {
          block.querySelector(".space-area").classList.add("error");
          block.querySelector(".space-count").classList.add("error");
          errorDiv.textContent = "Veuillez remplir tous les champs correctement.";
          valid = false;
        } else {
          const cost = area * count * rate;
          total += cost;
          breakdown += `<li>${type} (${count} x ${area}m²) : ${cost.toFixed(2)}€</li>`;
          block.querySelector(".space-area").classList.remove("error");
          block.querySelector(".space-count").classList.remove("error");
          errorDiv.textContent = "";
        }
      });

      if (!valid) {
        document.getElementById("cost-breakdown").innerHTML = "";
        document.getElementById("total-cost").textContent = "Veuillez remplir tous les champs correctement.";
        return;
      }

      if (products === "entreprise") {
        total += 10;
        breakdown += `<li>Produits (par l'entreprise) : 10.00€</li>`;
      } else if (products === "moi") {
        total += 5;
        breakdown += `<li>Produits (par moi-même) : 5.00€</li>`;
      }

      if (tools === "entreprise") {
        total += 15;
        breakdown += `<li>Outils (par l'entreprise) : 15.00€</li>`;
      } else if (tools === "moi") {
        total += 8;
        breakdown += `<li>Outils (par moi-même) : 8.00€</li>`;
      }

      document.getElementById("cost-breakdown").innerHTML = breakdown;
      document.getElementById("total-cost").textContent = total.toFixed(2);
    }

    function sendEmail() {
      const name = document.getElementById("name").value;
      const email = document.getElementById("email").value;
      const phone = document.getElementById("phone").value;
      const address = document.getElementById("address").value;
      const dirt = document.getElementById("dirt").value;
      const products = document.getElementById("products").value;
      const tools = document.getElementById("tools").value;
      const contract = document.getElementById("contract-type").value;
      const preferredDays = Array.from(document.querySelectorAll('input[name="preferred-day"]:checked'))
        .map(input => input.value)
        .join(", ") || "Aucun jour sélectionné";
      const preferredTimes = Array.from(document.querySelectorAll('input[name="preferred-time"]:checked'))
        .map(input => input.value)
        .join(", ") || "Aucune heure sélectionnée";
      const notes = document.getElementById("notes").value;
      const result = document.getElementById("total-cost").textContent + "€";

      let valid = true;
      if (!name || !email || !phone || !address) {
        if (!name) document.getElementById("name").classList.add("error");
        if (!email) document.getElementById("email").classList.add("error");
        if (!phone) document.getElementById("phone").classList.add("error");
        if (!address) document.getElementById("address").classList.add("error");
        valid = false;
      } else {
        document.getElementById("name").classList.remove("error");
        document.getElementById("email").classList.remove("error");
        document.getElementById("phone").classList.remove("error");
        document.getElementById("address").classList.remove("error");
      }

      if (!preferredDays) {
        document.getElementById("days-error").textContent = "Veuillez sélectionner au moins un jour.";
        valid = false;
      } else {
        document.getElementById("days-error").textContent = "";
      }

      if (!preferredTimes) {
        document.getElementById("times-error").textContent = "Veuillez sélectionner au moins une heure.";
        valid = false;
      } else {
        document.getElementById("times-error").textContent = "";
      }

      let services = "";
      document.querySelectorAll(".space-block").forEach(block => {
        const type = block.querySelector(".space-type").value;
        const area = block.querySelector(".space-area").value;
        const count = block.querySelector(".space-count").value;
        if (area && count) {
          services += `- ${type} : ${count} espace(s) de ${area} m²\n`;
        } else {
          valid = false;
          block.querySelector(".space-area").classList.add("error");
          block.querySelector(".space-count").classList.add("error");
          block.querySelector(".error-message").textContent = "Veuillez remplir tous les champs correctement.";
        }
      });

      if (!valid) {
        alert("Veuillez remplir tous les champs requis correctement.");
        return;
      }

      // تنسيق البريد الإلكتروني بصيغة نصية احترافية
      const emailBody = `
**Objet : Demande de nettoyage - Référence ${name}**

Cher(e) [Nom de l'entreprise ou destinataire],

Nous vous remercions de votre attention. Veuillez trouver ci-dessous les détails de ma demande de nettoyage :

- **Nom :** ${name}  
- **Email :** ${email}  
- **Téléphone :** ${phone}  
- **Adresse :** ${address}  

### Services demandés :
${services.split('\n').filter(line => line.trim()).map(line => line).join('\n')}

- **Niveau de saleté :** ${dirt.charAt(0).toUpperCase() + dirt.slice(1)}  
- **Produits de nettoyage :** ${products === "moi" ? "Fourni par moi-même" : products === "entreprise" ? "Fourni par l'entreprise" : "Fourni par le client"}  
- **Outils de nettoyage :** ${tools === "moi" ? "Fourni par moi-même" : tools === "entreprise" ? "Fourni par l'entreprise" : "Fourni par le client"}  
- **Type de contrat :** ${contract.charAt(0).toUpperCase() + contract.slice(1)}  
- **Jours préférés :** ${preferredDays}  
- **Heures préférées :** ${preferredTimes}  
- **Remarques :** ${notes || "(Aucun commentaire supplémentaire)"}  

**Total estimé : ${result}**

Nous restons à votre disposition pour toute information complémentaire ou pour planifier une intervention. Merci de nous contacter à l'adresse email ou au numéro de téléphone mentionnés ci-dessus.

Cordialement,  
${name}
      `;

      const mailto = `mailto:contactefrance@laposte.net?subject=${encodeURIComponent("Demande de nettoyage - Référence " + name)}&body=${encodeURIComponent(emailBody)}`;
      window.location.href = mailto;
      alert("Votre demande a été envoyée avec succès !");
    }

    window.onload = () => addSpaceField();</script></body><footer style="margin-top:40px;font-size:.95rem;color:#555;text-align:center"><p>🔒 Ce simulateur utilise une connexion<strong>HTTPS sécurisée</strong>. Toutes vos informations sont<strong>confidentielles</strong>et ne seront jamais partagées.</p><p>🛡️ Notre entreprise est couverte par une<strong>Assurance Responsabilité Civile Professionnelle</strong>. Celle-ci couvre les éventuels<strong>dégâts matériels ou corporels</strong>pouvant survenir accidentellement lors de notre intervention. Cela garantit votre protection et notre sérieux.</p><p>💡 Le prix affiché est une<strong>estimation indicative</strong>susceptible d’évoluer selon l’évaluation réelle du lieu.</p><p>✅ Vos données ne sont utilisées que pour vous contacter concernant votre demande de nettoyage.</p></footer></html>
